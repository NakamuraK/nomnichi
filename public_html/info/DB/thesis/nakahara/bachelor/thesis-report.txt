◆発表日   : 平成22年 2月12日(月)
◆発表会場 : 岡山大学工学部4号館10番講義室
◆発表題目 : Kexecを用いたTwinOS起動方式の検討
◆発表者   : 中原 大貴
◆概要:
  計算機の性能が向上し，1台の計算機上に複数のOSを走行させ多様なサービ
スを実現する機能が注目されている．このような技術として，１台の計算機上
で複数のOSを同時に走行させるTwinOSが研究されている．TwinOSでは，メモリ
分割機能や共存OSメモリ展開機能など様々な機能を実装し，2つのLinuxの同時
走行を実現している．
  現在のTwinOSには，共存OSの起動処理が複雑であるという問題がある．この
問題への対処として，Kexecを用いて共存OS起動処理を簡略化し汎用化する方
式を提案する．Kexecは，カーネルの高速な再起動を実現する機能であり，Lin
uxKernelに標準搭載されている．具体的には，カーネルをメモリに展開し，カ
ーネル起動処理の先頭アドレスにジャンプすることで高速な再起動を実現する．
Kexecを用いることで，セットアップルーチンを走行せずにカーネルを起動で
きる．このため，セットアップルーチンを走行するために複雑な処理を行う共
存OS起動処理を簡略化できる．また，KexecはLinux Kernelにより標準搭載さ
れているため，今後もカーネルのバージョンアップに対応してKexecもバージ
ョンアップされる．このため，Kexecを共存OS起動処理に用いることは，共存O
S起動処理の汎用化に有用である．しかし，Kexecは本来カーネルを再起動する
機能であり，共存OS起動処理にそのまま用いることはできない．このため，共
存OS起動処理を実現するための機能をKexecに追加する必要がある．
  本論文では，KexecのTwinOSへの応用方法を検討し，一部の機能を実装した
結果を述べる．まず，現在のTwinOSの問題点を述べ，Kexecを用いた共存OS起
動処理の目的について述べる．次に，Kexecの概要を述べ，Kexecを用いて共存
OS起動処理を行う際の要求について述べ，この要求への対処方法について説明
する．


◆質疑応答:(質問者(敬称略))
Q1: 実装は完了したのか．(半田)
A1: 実装した部分の動作は確認した．

Q2: どこまで実現できているのか．(田端)
A2: 共存OSのカーネルを展開して先行OSに処理を戻すことはできているが，先
    行OSの走行環境を破壊せずに共存OSの起動処理を行うことはできていない．

Q3: リアルモード部分を1MB以上の領域と記述があるが，この1MBというのはサ
    イズではなく，番地のことか．(村上)
A3: その通りである．

Q4: 番地をメガバイトで表す言い方はあるのか．(村上)
A4: あると思う．

Q5: 元々のKexecの規模はどのくらいか．(名古屋)
A5: カーネル内が千行程度でKexecを呼び出すアプリケーション側は合計で1万
    行程度である．

Q6: 改変したのはカーネル内とアプリケーション側のどちらか．(名古屋)
A6: 両方である．

◆反省:
(1) 顔だけ聴衆の方を向いて喋っていたが，体も聴衆の方に向けるべきだった．
(2) Q4に対して応答で，あると思うと答えてしまったが，実際には0x100000な
    どと表現するべきである．