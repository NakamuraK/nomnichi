<h1>ホームディレクトリUSBの運用方法</h1>

<div align="right">
作成日：2012年3月26日<br>
最終更新日：2012年3月26日<br>
作成者：中原 大貴<br>
</div>

<hr>

<h2>1. はじめに</h2>

ホームディレクトリUSBの内容をsuzakuにアップロードして運用する．<br>
この際，suzakuは学外のVPSであるため，セキュリティを考慮してTrueCryptを用いてデータを管理する．<br>
TrueCryptとは，暗号化された仮想ディスクを作成・利用するソフトウェアである．<br>
以下でTrueCryptを用いたホームディレクトリUSBの運用方法について説明する．


<h2>2. TrueCryptの準備</h2>

文書作成用計算機においてTrueCryptを準備する．

<dl>

<dt>(1) TrueCryptのダウンロード</dt>
<dd>
<a href="http://www.truecrypt.org/downloads">http://www.truecrypt.org/downloads</a>からTrueCryptをダウンロードする．
</dd>

<br>

<dt>(2) TrueCryptのインストール</dt>
<dd>
TrueCtyptをインストールする．<br>
この際，<a href="http://www.truecrypt.org/localizations">http://www.truecrypt.org/localizations</a>からLanguage Packをダウンロードし，<br>
Language.jaをTrueCryptの実行ファイルが存在するディレクトリにコピーすることによって日本語化可能になる．
</dd>

<br>

</dl>


<h2>3. ボリュームの作成</h2>

以下の手順で，ボリューム(特定のディレクトリをTrueCryptによって暗号化したもの)を作成する．

<dl>

<dt>(1) ボリュームの作成 をクリック</dt>

<br>

<dt>(2) 暗号化されたファイルコンテナを作成 にチェックが入った状態で 次へ をクリック</dt>

<br>

<dt>(3) TrueCrypt標準ボリューム にチェックが入った状態で 次へ をクリック</dt>

<br>

<dt>(4) ボリュームの位置を入力し，次へ をクリック</dt>
<dd>
ファイルの選択をクリックし，ファイルの配置場所とファイル名を決める．<br>
ファイル名は，アカウント名.tc にするとよい．(例：nakahara.tc)<br>
なお，履歴を保存しない にチェックを入れておく．
</dd>

<br>

<dt>(5) 暗号化オプションを選択し，次へ をクリック</dt>
<dd>
両方ともデフォルトの設定(暗号化アルゴリズムはAES，ハッシュアルゴリズムはRIPEMD-160)を選択するとよい．
</dd>

<br>

<dt>(6) ボリュームのサイズを入力し，次へ をクリック</dt>
<dd>
個人のホームディレクトリUSBの合計サイズよりも大きめにサイズを入力する．<br>
例えば，個人のホームディレクトリUSBの合計サイズが80MBである場合は，100MBのサイズにする．<br>
</dd>

<br>

<dt>(7) ボリュームのパスワードを入力し，次へ をクリック</dt>
<dd>
パスワードに関しては，上級生から引き継いでいく．<br>
なお，キーファイルを使用 と パスワード表示 にはチェックを入れない．
</dd>

<br>

<dt>(8) ボリュームのオプションを入力し，フォーマット をクリック</dt>
<dd>
オプションに関しては，両方ともデフォルトの設定(ファイルシステムはFAT，クラスターはデフォルト)を選択するとよい．<br>
また，この際，マウスをランダムに動かすことによって暗号鍵の強度を上げることができる．
</dd>

<br>

以上で(4)で指定した場所にボリュームが作成される．

</dl>


<h2>4. ボリュームのマウント</h2>

以下の手順で，ボリュームをマウントする．

<dl>

<dt>(1) マウント先のドライブを選択</dt>
<dd>
環境によって異なるが，一番上のドライブを選択すれば問題無いと思われる．
</dd>

<br>

<dt>(2) マウントするボリュームを選択</dt>
<dd>
ファイルの選択 をクリックし，3章で作成したボリュームを選択する．<br>
その後，マウントをクリックする．
</dd>

<br>

<dt>(3) マウント をクリック</dt>

<br>

<dt>(4) パスワードを入力</dt>

3章の(7)で設定したパスワードを入力する．

<br>

</dl>


<h2>5. データの格納</h2>

4章の手順によって指定したドライブにボリュームがマウントされており，<br>
このドライブの中にホームディレクトリのデータをコピーする．


<h2>6. ボリュームのアップロード</h2>

suzaku.swlab.cs.okayama-u.ac.jp に nomlab ユーザーでログインし，<br>
/var/www/nomlab/home_directory/ の中にホームディレクトリのデータが入ったボリュームを転送する．

<h2>7. 運用</h2>

<a href="http://suzaku.swlab.cs.okayama-u.ac.jp/nomlab/home_directory/">http://suzaku.swlab.cs.okayama-u.ac.jp/nomlab/home_directory/</a>
にアクセスし，<br>
運用したいボリュームを選択してダウンロードする．<br>
その後，4章と同じ手順でボリュームをマウントし，運用する．
